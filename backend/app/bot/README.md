# Telegram Bot - –°–∏—Å—Ç–µ–º–∞ —É—á–µ—Ç–∞ –∑–∞—Ç—Ä–∞—Ç

## –û–ø–∏—Å–∞–Ω–∏–µ
Telegram –±–æ—Ç –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞—è–≤–æ–∫ –Ω–∞ –º–∞—Ç–µ—Ä–∏–∞–ª—ã, —Ç–µ—Ö–Ω–∏–∫—É –∏ –ø–æ–¥–∞—á–∏ —Ç–∞–±–µ–ª–µ–π –†–¢–ë.

## –§—É–Ω–∫—Ü–∏–∏

### –î–ª—è –±—Ä–∏–≥–∞–¥–∏—Ä–æ–≤ (FOREMAN):
- ‚úÖ **–ó–∞—è–≤–∫–∏ –Ω–∞ –º–∞—Ç–µ—Ä–∏–∞–ª—ã** (–≤–∫–ª—é—á–∞—è –∏–Ω–µ—Ä—Ç–Ω—ã–µ —Å –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º –≤—Ä–µ–º–µ–Ω–µ–º –¥–æ—Å—Ç–∞–≤–∫–∏)
- ‚è≥ –ó–∞—è–≤–∫–∏ –Ω–∞ —Ç–µ—Ö–Ω–∏–∫—É
- ‚è≥ –ü–æ–¥–∞—á–∞ —Ç–∞–±–µ–ª–µ–π –†–¢–ë (Excel)
- ‚è≥ –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–≤–æ–∏—Ö –∑–∞—è–≤–æ–∫

### –ò–Ω–µ—Ä—Ç–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã
–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞—è–≤–∫–∏ –Ω–∞ **–∏–Ω–µ—Ä—Ç–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã** (–ø–µ—Å–æ–∫, —â–µ–±–µ–Ω—å, –ü–ì–°, —Ä–∞—Å—Ç–≤–æ—Ä):
- üî¥ **–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û** —É–∫–∞–∑–∞—Ç—å –∂–µ–ª–∞–µ–º–æ–µ –≤—Ä–µ–º—è –¥–æ—Å—Ç–∞–≤–∫–∏
- –ü—Ä–∏–º–µ—Ä—ã: `08:00-12:00`, `14:00-18:00`, `—É—Ç—Ä–æ`, `–¥–µ–Ω—å`
- –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ —É—Ä–æ–≤–Ω–µ –±–æ—Ç–∞ + backend API

## –ó–∞–ø—É—Å–∫

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ .env
```bash
# Telegram Bot
TELEGRAM_BOT_TOKEN=1234567890:ABCdefGHIjklMNOpqrsTUVwxyz
TELEGRAM_ADMIN_IDS=123456789
API_BASE_URL=http://localhost:8000/api/v1
```

### 2. –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
```bash
cd backend
python -m app.bot.main
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞
```
app/bot/
‚îú‚îÄ‚îÄ main.py              # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ config.py            # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ handlers/            # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥
‚îÇ   ‚îú‚îÄ‚îÄ common.py        # /start, /help
‚îÇ   ‚îú‚îÄ‚îÄ materials.py     # –ó–∞—è–≤–∫–∏ –Ω–∞ –º–∞—Ç–µ—Ä–∏–∞–ª—ã
‚îÇ   ‚îî‚îÄ‚îÄ __init__.py
‚îú‚îÄ‚îÄ keyboards/           # –ö–ª–∞–≤–∏–∞—Ç—É—Ä—ã
‚îÇ   ‚îî‚îÄ‚îÄ __init__.py
‚îú‚îÄ‚îÄ states/              # FSM —Å–æ—Å—Ç–æ—è–Ω–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ __init__.py
‚îî‚îÄ‚îÄ utils/               # –£—Ç–∏–ª–∏—Ç—ã
    ‚îú‚îÄ‚îÄ api_client.py    # –ö–ª–∏–µ–Ω—Ç –¥–ª—è backend API
    ‚îî‚îÄ‚îÄ __init__.py
```

## –ö–æ–º–∞–Ω–¥—ã
- `/start` - –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞, –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
- `/help` - –°–ø—Ä–∞–≤–∫–∞
- `/cancel` - –û—Ç–º–µ–Ω–∞ —Ç–µ–∫—É—â–µ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è

## –ú–µ–Ω—é
- üì¶ **–ó–∞—è–≤–∫–∞ –Ω–∞ –º–∞—Ç–µ—Ä–∏–∞–ª—ã** - —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞—è–≤–∫–∏ (—Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∏–Ω–µ—Ä—Ç–Ω—ã—Ö)
- üöú **–ó–∞—è–≤–∫–∞ –Ω–∞ —Ç–µ—Ö–Ω–∏–∫—É** - –∑–∞–∫–∞–∑ —Ç–µ—Ö–Ω–∏–∫–∏
- üìä **–¢–∞–±–µ–ª—å –†–¢–ë** - –ø–æ–¥–∞—á–∞ —Ç–∞–±–µ–ª—è
- üìà **–ú–æ–∏ –∑–∞—è–≤–∫–∏** - –ø—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç—É—Å–æ–≤
- ‚ÑπÔ∏è **–ü–æ–º–æ—â—å** - —Å–ø—Ä–∞–≤–∫–∞

## FSM - –ó–∞—è–≤–∫–∞ –Ω–∞ –∏–Ω–µ—Ä—Ç–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã

### –ü–æ—Ç–æ–∫ —Å–æ–∑–¥–∞–Ω–∏—è:
1. **–í—ã–±–æ—Ä –æ–±—ä–µ–∫—Ç–∞** ‚Üí ID –æ–±—ä–µ–∫—Ç–∞
2. **–¢–∏–ø –º–∞—Ç–µ—Ä–∏–∞–ª–∞** ‚Üí –û–±—ã—á–Ω—ã–µ / –ò–Ω–µ—Ä—Ç–Ω—ã–µ
3. **–í—Ä–µ–º—è –¥–æ—Å—Ç–∞–≤–∫–∏** *(—Ç–æ–ª—å–∫–æ –¥–ª—è –∏–Ω–µ—Ä—Ç–Ω—ã—Ö!)* ‚Üí 08:00-12:00
4. **–°—Ä–æ—á–Ω–æ—Å—Ç—å** ‚Üí –û–±—ã—á–Ω–∞—è / –°—Ä–æ—á–Ω–∞—è / –ö—Ä–∏—Ç–∏—á–Ω–∞—è
5. **–î–∞—Ç–∞ –ø–æ—Å—Ç–∞–≤–∫–∏** ‚Üí –î–î.–ú–ú.–ì–ì–ì–ì
6. **–ü–æ–∑–∏—Ü–∏–∏** ‚Üí –ù–∞–∑–≤–∞–Ω–∏–µ, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ, –µ–¥–∏–Ω–∏—Ü–∞
7. **–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ** ‚Üí –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ backend API

## –í–∞–ª–∏–¥–∞—Ü–∏—è
- ‚úÖ –î–∞—Ç–∞ –ø–æ—Å—Ç–∞–≤–∫–∏ –≤ –±—É–¥—É—â–µ–º
- ‚úÖ –ü–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
- ‚úÖ –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –¥–æ—Å—Ç–∞–≤–∫–∏ –¥–ª—è INERT
- ‚úÖ –ú–∏–Ω–∏–º—É–º 1 –ø–æ–∑–∏—Ü–∏—è –≤ –∑–∞—è–≤–∫–µ

## TODO
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å backend auth
- [ ] –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –æ–±—ä–µ–∫—Ç–æ–≤ –∏–∑ API
- [ ] –ó–∞—è–≤–∫–∏ –Ω–∞ —Ç–µ—Ö–Ω–∏–∫—É
- [ ] –ó–∞–≥—Ä—É–∑–∫–∞ Excel —Ç–∞–±–µ–ª–µ–π
- [ ] –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç—É—Å–æ–≤ –∑–∞—è–≤–æ–∫
- [ ] –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–æ–≤
- [ ] Webhook —Ä–µ–∂–∏–º (–¥–ª—è production)

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
1. –ü–æ–ª—É—á–∏—Ç—å —Ç–æ–∫–µ–Ω –æ—Ç @BotFather
2. –î–æ–±–∞–≤–∏—Ç—å —Ç–æ–∫–µ–Ω –≤ `.env`
3. –ó–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞
4. –û—Ç–∫—Ä—ã—Ç—å –±–æ—Ç–∞ –≤ Telegram
5. –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–æ–∑–¥–∞—Ç—å –∑–∞—è–≤–∫—É –Ω–∞ –∏–Ω–µ—Ä—Ç–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã
