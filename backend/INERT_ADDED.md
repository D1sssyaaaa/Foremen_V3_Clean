# ‚úÖ –ò–ù–ï–†–¢–ù–´–ï –ú–ê–¢–ï–†–ò–ê–õ–´ - –î–û–ë–ê–í–õ–ï–ù–û

## –ß–¢–û –†–ï–ê–õ–ò–ó–û–í–ê–ù–û

–í—ã –±—ã–ª–∏ **–∞–±—Å–æ–ª—é—Ç–Ω–æ –ø—Ä–∞–≤—ã** - —Ñ—É–Ω–∫—Ü–∏—è –∑–∞–∫–∞–∑–∞ **–∏–Ω–µ—Ä—Ç–Ω—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤** (–ø–µ—Å–æ–∫, —â–µ–±–µ–Ω—å, –ü–ì–°) –±—ã–ª–∞ —É–ø–æ–º—è–Ω—É—Ç–∞ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ `–°–∏—Å—Ç–µ–º–∞.md`, –Ω–æ **–Ω–µ –±—ã–ª–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞** –≤ –∫–æ–¥–µ!

### –¢–µ–ø–µ—Ä—å –¥–æ–±–∞–≤–ª–µ–Ω–æ:

1. ‚úÖ **Enum `MaterialType`** –≤ `app/core/models_base.py`
   - `REGULAR` - –æ–±—ã—á–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã
   - `INERT` - –∏–Ω–µ—Ä—Ç–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã

2. ‚úÖ **–ü–æ–ª—è –≤ –º–æ–¥–µ–ª–∏** `MaterialRequest`:
   - `material_type` VARCHAR(20) - —Ç–∏–ø –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤
   - `delivery_time` VARCHAR(50) - –∂–µ–ª–∞–µ–º–æ–µ –≤—Ä–µ–º—è –¥–æ—Å—Ç–∞–≤–∫–∏

3. ‚úÖ **–ú–∏–≥—Ä–∞—Ü–∏—è –ë–î** `add_material_type.py`
   - –î–æ–±–∞–≤–ª—è–µ—Ç –ø–æ–ª—è `material_type` –∏ `delivery_time`
   - –°–æ–∑–¥–∞–µ—Ç –∏–Ω–¥–µ–∫—Å –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏

4. ‚úÖ **–°—Ö–µ–º—ã Pydantic** –æ–±–Ω–æ–≤–ª–µ–Ω—ã:
   - `MaterialRequestCreate` —Å –ø–æ–ª–µ–º `material_type`
   - –í–∞–ª–∏–¥–∞—Ü–∏—è: –¥–ª—è `inert` –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ `delivery_time`
   - `MaterialRequestResponse` —Å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º —Ç–∏–ø–∞

5. ‚úÖ **API —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è**:
   - `GET /api/v1/material-requests?material_type=inert`
   - `GET /api/v1/material-requests?material_type=regular`

6. ‚úÖ **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**:
   - `INERT_MATERIALS.md` - –ø–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ
   - `INERT_EXAMPLES.md` - –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è API
   - `FINAL_REPORT.md` - –æ–±–Ω–æ–≤–ª–µ–Ω —Å –∏–Ω—Ñ–æ –æ–± –∏–Ω–µ—Ä—Ç–Ω—ã—Ö

---

## –ö–ê–ö –ò–°–ü–û–õ–¨–ó–û–í–ê–¢–¨

### –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞—è–≤–∫–∏ –Ω–∞ –∏–Ω–µ—Ä—Ç–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã:

```bash
POST /api/v1/material-requests
{
  "cost_object_id": 5,
  "material_type": "inert",        # ‚Üê –ù–û–í–û–ï!
  "urgency": "urgent",
  "required_date": "2026-01-27",
  "delivery_time": "–¥–æ 10:00",     # ‚Üê –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –¥–ª—è –∏–Ω–µ—Ä—Ç–Ω—ã—Ö!
  "items": [
    {
      "material_name": "–ü–µ—Å–æ–∫ —Ä–µ—á–Ω–æ–π",
      "quantity": 20.0,
      "unit": "–º¬≥"                 # ‚Üê –ï–¥–∏–Ω–∏—Ü–∞ –∏–∑–º–µ—Ä–µ–Ω–∏—è - –∫—É–±—ã
    }
  ]
}
```

### –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∑–∞—è–≤–æ–∫:

```bash
# –¢–æ–ª—å–∫–æ –∏–Ω–µ—Ä—Ç–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã
GET /api/v1/material-requests?material_type=inert

# –¢–æ–ª—å–∫–æ –æ–±—ã—á–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã  
GET /api/v1/material-requests?material_type=regular

# –°—Ä–æ—á–Ω—ã–µ –∏–Ω–µ—Ä—Ç–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã
GET /api/v1/material-requests?material_type=inert&urgency=urgent
```

---

## –û–¢–õ–ò–ß–ò–Ø –ò–ù–ï–†–¢–ù–´–• –û–¢ –û–ë–´–ß–ù–´–•

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –û–±—ã—á–Ω—ã–µ | –ò–Ω–µ—Ä—Ç–Ω—ã–µ |
|----------|---------|----------|
| **–í—Ä–µ–º—è –¥–æ—Å—Ç–∞–≤–∫–∏** | –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ | ‚ö†Ô∏è **–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û** |
| **–ï–¥–∏–Ω–∏—Ü—ã** | —à—Ç, –º, –∫–≥, —É–ø–∞–∫ | **–º¬≥** (–∫—É–±—ã) |
| **–ü—Ä–∏–º–µ—Ä—ã** | –ö–∞–±–µ–ª—å, –∫—Ä–µ–ø–µ–∂ | –ü–µ—Å–æ–∫, —â–µ–±–µ–Ω—å, –ü–ì–° |
| **–ü–æ—Å—Ç–∞–≤—â–∏–∫–∏** | –õ—é–±—ã–µ | –ö–∞—Ä—å–µ—Ä—ã, –∑–∞–≤–æ–¥—ã |
| **–°—Ä–æ—á–Ω–æ—Å—Ç—å** | –æ–±—ã—á–Ω–æ normal | —á–∞—Å—Ç–æ urgent/critical |

---

## TELEGRAM BOT (TODO)

–î–ª—è –ø–æ–ª–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –≤ –±–æ—Ç–µ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å:

```python
class BotStates:
    # –ó–∞—è–≤–∫–∏ –Ω–∞ –º–∞—Ç–µ—Ä–∏–∞–ª—ã
    MR_SELECT_TYPE = "mr:select_type"  # ‚Üê –í—ã–±–æ—Ä: –æ–±—ã—á–Ω—ã–µ/–∏–Ω–µ—Ä—Ç–Ω—ã–µ
    MR_SELECT_OBJECT = "mr:select_object"
    MR_ENTER_MATERIALS = "mr:enter_materials"
    MR_ENTER_DELIVERY_TIME = "mr:enter_delivery_time"  # ‚Üê –î–ª—è –∏–Ω–µ—Ä—Ç–Ω—ã—Ö
    MR_ENTER_ADDRESS = "mr:enter_address"
    MR_ENTER_URGENCY = "mr:enter_urgency"
```

–°—Ü–µ–Ω–∞—Ä–∏–π –±–æ—Ç–∞:
```
–ë—Ä–∏–≥–∞–¥–∏—Ä ‚Üí /new_material_request

[BOT]: –í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤:
  üì¶ –û–ë–´–ß–ù–´–ï –ú–ê–¢–ï–†–ò–ê–õ–´
  üèóÔ∏è –ò–ù–ï–†–¢–ù–´–ï –ú–ê–¢–ï–†–ò–ê–õ–´

–ë—Ä–∏–≥–∞–¥–∏—Ä ‚Üí üèóÔ∏è –ò–ù–ï–†–¢–ù–´–ï –ú–ê–¢–ï–†–ò–ê–õ–´

[BOT]: –í–≤–µ–¥–∏—Ç–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã...
[BOT]: ‚è∞ –£–∫–∞–∂–∏—Ç–µ –ñ–ï–õ–ê–ï–ú–û–ï –í–†–ï–ú–Ø –¥–æ—Å—Ç–∞–≤–∫–∏ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ!)
...
```

---

## –ß–¢–û –î–ê–õ–¨–®–ï

### –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é:
```bash
cd backend
alembic upgrade head
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å:
```bash
# –°–æ–∑–¥–∞—Ç—å –∑–∞—è–≤–∫—É –Ω–∞ –∏–Ω–µ—Ä—Ç–Ω—ã–µ —á–µ—Ä–µ–∑ API
curl -X POST http://localhost:8000/api/v1/material-requests \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer <token>" \
  -d '{
    "cost_object_id": 1,
    "material_type": "inert",
    "urgency": "urgent",
    "required_date": "2026-01-30",
    "delivery_time": "–¥–æ 10:00",
    "items": [
      {"material_name": "–ü–µ—Å–æ–∫ —Ä–µ—á–Ω–æ–π", "quantity": 20, "unit": "–º¬≥"}
    ]
  }'

# –ü–æ–ª—É—á–∏—Ç—å —Ç–æ–ª—å–∫–æ –∏–Ω–µ—Ä—Ç–Ω—ã–µ –∑–∞—è–≤–∫–∏
curl http://localhost:8000/api/v1/material-requests?material_type=inert
```

---

## –§–ê–ô–õ–´ –ò–ó–ú–ï–ù–ï–ù–´

1. **backend/app/core/models_base.py** - –¥–æ–±–∞–≤–ª–µ–Ω `MaterialType` enum
2. **backend/app/models.py** - –¥–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª—è `material_type`, `delivery_time`
3. **backend/app/materials/schemas.py** - –æ–±–Ω–æ–≤–ª–µ–Ω—ã —Å—Ö–µ–º—ã —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
4. **backend/app/materials/router.py** - –¥–æ–±–∞–≤–ª–µ–Ω —Ñ–∏–ª—å—Ç—Ä `material_type`
5. **backend/migrations/versions/add_material_type.py** - –º–∏–≥—Ä–∞—Ü–∏—è –ë–î
6. **backend/INERT_MATERIALS.md** - –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
7. **backend/INERT_EXAMPLES.md** - –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
8. **backend/FINAL_REPORT.md** - –æ–±–Ω–æ–≤–ª–µ–Ω –æ—Ç—á–µ—Ç

---

**‚úÖ Backend –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ —Å –∏–Ω–µ—Ä—Ç–Ω—ã–º–∏ –º–∞—Ç–µ—Ä–∏–∞–ª–∞–º–∏!**

**üîú –°–ª–µ–¥—É—é—â–∏–π —à–∞–≥**: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –≤ Telegram Bot (FSM —Å–æ—Å—Ç–æ—è–Ω–∏—è)
