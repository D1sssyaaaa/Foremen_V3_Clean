# План разработки: РТБ Telegram Web App

Этот чек-лист определяет строгий порядок действий для реализации новой системы подачи табелей.

## 1. База данных (Backend)
- [x] **Добавить модель `SavedWorker`** в `backend/app/models.py`.
    - Поля: `id`, `foreman_id`, `name`, `role`.
- [x] **Создать миграцию** для базы данных.
    - (Сделал через `create_missing_tables.py` для скорости и надежности в dev).
- [x] **Проверить** создание таблицы (скрипт проверки).

## 2. Frontend (HTML/JS)
- [x] **Создать папку `frontend_timetracker`** в корне проекта.
- [x] **Верстка `timesheet.html`**:
    - [x] Подключение Telegram WebApp JS SDK.
    - [x] Логика чтения параметров URL (`objects`).
    - [x] Форма добавления рабочих (localStorage).
    - [x] Интерфейс выбора (чекбоксы).
    - [x] Отправка данных (`sendData`).
- [ ] **Тестирование Web App локально** (открыть в браузере) - *На стороне пользователя*.

## 3. Бот (Backend Logic)
- [x] **Обновить клавиатуру** в `backend/app/bot/keyboards/time_sheets.py`.
    - [x] Добавлена функция `get_webapp_keyboard`.
- [x] **Обновить хендлер** `start_timesheet` в `backend/app/bot/handlers/time_sheets.py`.
    - [x] Генерирует ссылку с объектами.
- [x] **Реализовать обработку `web_app_data`** в хендлере.
    - [x] Парсинг JSON.
    - [x] Сохранение табеля в БД.
- [x] **Интеграция с `SavedWorker`**.
    - [x] Автоматическое сохранение новых имен.

## 4. Развертывание (Deployment)
- [ ] **Подготовить инструкцию** по загрузке на GitHub Pages.
- [ ] **Финальная проверка** интеграции.

## 5. Очистка
- [ ] Удалить старый код ручного ввода (по желанию, или оставить как резерв).
